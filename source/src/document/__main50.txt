ストーリーモードプログラムについての説明

main50.c	//	プログラム本体

main50.c を作ったのは大倉さんなので、不明なところが多々有ります。

*ソース説明
------------------------------------------------------------------------------------------------------------------------------------
行番号	75 〜 122行

各ステージの文章データです。文字列内の制御文字の説明は、他で行います。
------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------
void set_bg_param( uObjBg *bg, u8 *tex, u16 load, u8 size, u16 width, u16 height, s16 posx, s16 posy, u16 scx, u16 scy )
行番号	277 〜 297行
Ｓ２ＤＥＸのパラメータ設定関数( 大倉作 )
------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------
static void correct_pos( uObjBg *bg, s16 pos, u16 size, u8 vh)
行番号	299 〜 316行
拡縮時座標補正( 大倉作 )

やっていることは、雲を中心から拡大縮小させたときの描画座標を設定している。
------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------
void make_pos( void )
行番号	318 〜 331行
画面揺れ( 大倉作 )

ボム兵ステージの大砲の揺れを行う処理をしている。
単純に背景のＹ座標をずらしている。
------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------
void disp_tile( void )
行番号	333 〜 386行
タイル表示( 下の部分 )関数( 大倉作 )

338 〜 340行	表示タイルのグラフィックデータとパレットデータのロード
342行			文字列進行の停止
343 〜 384行	(st_flg & 07)によって描画処理を変えている。
344 〜 356行	タイルが下に下がってくる処理(描画も行っている)。
				タイルのＹ座標が 160 まで下がったら文字列の進行を再開している。
357 〜 374行	タイルが上に上がる処理を行っている。
				タイルのＹ座標が ０ になったとき、st_pageの内容を調べ、 255 でない場合は、
				次の背景番号に切り替える。255 だった場合は、何の変化も無い表示( フェードアウト処理中になる )
				にフラグを切り替える。
375 〜 383行	ただ表示しているだけ。
------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------
void main50(NNSched* sched)
行番号	388	〜 587行
メイン処理関数

( コメント参照 )
------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------
void graphic50(void)
行番号	589	〜 676行
グラフィック描画関数

( コメント参照 )
------------------------------------------------------------------------------------------------------------------------------------


